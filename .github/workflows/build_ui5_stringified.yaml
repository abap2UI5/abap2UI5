name: build_ui5_stringified

on:
  push:
    branches: [main]

permissions:
  contents: write
  pull-requests: write  # Berechtigung f체r Pull-Requests hinzuf체gen

jobs:
  build_ui5_stringified:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    steps:
    - uses: actions/checkout@v3
    - uses: actions/setup-node@v3
      with:
        node-version: 20
        cache: 'npm'  # Caching von Node.js-Abh채ngigkeiten
    - run: npm install @abaplint/cli -g
    - run: | 
        node ci/app2string/trans2abap.js 
        abaplint --fix ci/app2string/abaplint.jsonc
        git status
    - name: Commit changes
      run: |
        git config --global user.name 'github-actions[bot]'
        git config --global user.email 'github-actions[bot]@users.noreply.github.com'
        git add .
        git commit -m 'Automatic update by GitHub Actions' || echo "No changes to commit"
    - name: Open PR
      uses: peter-evans/create-pull-request@v4
      with:
        title: Automatic Update
        branch: update-branch  # Optional: Branchname f체r den PR